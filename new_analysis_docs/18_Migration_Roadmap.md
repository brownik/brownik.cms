# townE 마이그레이션 로드맵

## 개요

townE 시스템의 단계별 마이그레이션 계획입니다.

## 마이그레이션 단계

### 현재 상태
- **프론트엔드**: JSP (Java Server Pages)
- **백엔드**: Spring MVC
- **데이터베이스**: MariaDB
- **배포**: Tomcat

### 1단계: 첫 번째 리뉴얼 (Migration 및 신규 개발)

**목표**: 프론트엔드를 Next.js로 전환, 데이터베이스는 MariaDB 유지 (주소만 변경)

- **프론트엔드**: Next.js 14+ (App Router)
- **백엔드**: Spring Boot 3.x (RESTful API)
- **데이터베이스**: MariaDB (기존 DB 유지, 연결 주소만 변경)
- **기간**: 약 12-16주 (3-4개월)

#### 주요 작업
1. Spring Boot RESTful API 개발
2. Next.js 프론트엔드 개발
3. 기존 JSP 기능을 Next.js로 마이그레이션
4. 신규 기능 개발
5. 데이터베이스 연결 설정 (주소만 변경)
6. 통합 테스트 및 배포

#### 장점
- 데이터베이스 스키마 변경 없이 프론트엔드만 전환
- 기존 데이터베이스 그대로 사용 (연결 주소만 변경)
- 리스크 최소화
- 단계별 검증 가능

#### 중요 사항
- **데이터베이스 스키마 변경 불필요**: 기존 MariaDB 스키마 그대로 사용
- **연결 주소만 변경**: `application.yml`의 데이터소스 URL만 수정
- **기존 데이터 유지**: 모든 기존 데이터 그대로 사용

#### 참고 문서
- `15_NextJS_MariaDB_Start_Guide.md` - Next.js + MariaDB 시작 가이드
- `11_NextJS_Frontend_Guide.md` - Next.js 프론트엔드 가이드
- `13_Spring_Boot_REST_API_Guide.md` - Spring Boot REST API 가이드

---

### 2단계: 두 번째 리뉴얼 (Migration 및 디자인 리뉴얼)

**목표**: 데이터베이스를 Supabase로 전환 (주소만 변경), 디자인 리뉴얼

- **프론트엔드**: Next.js 14+ (App Router) - 유지
- **백엔드**: Spring Boot 3.x (RESTful API) - 유지
- **데이터베이스**: Supabase (PostgreSQL 기반, 기존 DB 주소만 변경)
- **기간**: 약 8-12주 (2-3개월)

#### 주요 작업
1. Supabase 프로젝트 생성 및 설정
2. 기존 데이터베이스 연결 주소 변경 (Supabase로)
3. 데이터베이스 스키마 확인 (기존 스키마 유지 또는 최소 변경)
4. Supabase Auth 통합 (선택적)
5. RLS (Row Level Security) 정책 설정 (선택적)
6. 디자인 리뉴얼
7. 성능 최적화
8. 통합 테스트 및 배포

#### 장점
- Supabase의 고급 기능 활용 (Auth, Realtime, Storage)
- PostgreSQL의 강력한 기능 활용
- 디자인 개선과 함께 데이터베이스 전환
- 기존 스키마 최대한 유지 가능

#### 중요 사항
- **스키마 변경 최소화**: 기존 MariaDB 스키마를 최대한 유지
- **연결 주소만 변경**: `application.yml`의 데이터소스 URL만 Supabase로 변경
- **데이터 마이그레이션**: 기존 데이터를 Supabase로 이전 (필요시)
- **스키마 변환**: MariaDB → PostgreSQL 타입 변환 (최소한만)

#### 참고 문서
- `10_Supabase_Migration_Guide.md` - Supabase 마이그레이션 가이드
- `12_Complete_Migration_Strategy.md` - 통합 마이그레이션 전략

---

## 전체 일정

```
Phase 0: 현재 상태
├── JSP + Spring MVC + MariaDB
└── 기간: 현재 운영 중

Phase 1: 첫 번째 리뉴얼 (12-16주)
├── Week 1-2: 준비 및 설계
│   ├── Spring Boot 프로젝트 구조 설계
│   ├── Next.js 프로젝트 구조 설계
│   ├── RESTful API 설계
│   └── 마이그레이션 계획 수립
│
├── Week 3-6: 백엔드 개발
│   ├── Spring Boot 전환
│   ├── RESTful API 구현
│   ├── 기존 비즈니스 로직 마이그레이션
│   └── 단위 테스트
│
├── Week 7-12: 프론트엔드 개발
│   ├── Next.js 프로젝트 생성
│   ├── 컴포넌트 개발
│   ├── 기존 JSP 기능 마이그레이션
│   ├── 신규 기능 개발
│   └── UI/UX 개선
│
├── Week 13-14: 통합 및 테스트
│   ├── 통합 테스트
│   ├── 성능 테스트
│   ├── 사용자 테스트
│   └── 버그 수정
│
└── Week 15-16: 배포
    ├── 스테이징 배포
    ├── 운영 배포
    └── 모니터링

Phase 2: 두 번째 리뉴얼 (8-12주)
├── Week 1-2: 준비 및 설계
│   ├── Supabase 프로젝트 생성
│   ├── 스키마 설계
│   ├── 마이그레이션 계획 수립
│   └── 디자인 리뉴얼 계획
│
├── Week 3-5: 데이터베이스 마이그레이션
│   ├── 스키마 마이그레이션
│   ├── 데이터 마이그레이션
│   ├── Supabase Auth 통합
│   └── RLS 정책 설정
│
├── Week 6-8: 애플리케이션 수정
│   ├── Spring Boot 설정 변경
│   ├── JPA Entity 수정
│   ├── 쿼리 수정
│   └── 테스트
│
├── Week 9-10: 디자인 리뉴얼
│   ├── UI/UX 디자인
│   ├── 컴포넌트 리뉴얼
│   └── 반응형 디자인 개선
│
├── Week 11: 통합 및 테스트
│   ├── 통합 테스트
│   ├── 성능 테스트
│   └── 버그 수정
│
└── Week 12: 배포
    ├── 스테이징 배포
    ├── 운영 배포
    └── 모니터링
```

## 단계별 전략

### Phase 1 전략: 점진적 마이그레이션

#### 모듈별 순차 마이그레이션
1. **회원 관리 모듈** (우선순위 1)
   - 가장 핵심 기능
   - 인증/인가 기반
   - 테스트 용이

2. **게시판 모듈** (우선순위 2)
   - 사용 빈도 높음
   - 복잡도 중간

3. **컨텐츠 관리 모듈** (우선순위 3)
   - CMS 기능
   - DB 저장형 소스 코드 처리

4. **기타 모듈** (우선순위 4)
   - 커뮤니티, 투표, 데이터셋 등

#### 병행 운영 전략
- 기존 시스템과 새 시스템 병행 운영
- 모듈별로 점진적 전환
- 검증 후 완전 전환

### Phase 2 전략: 데이터베이스 마이그레이션

#### 마이그레이션 방식 선택

**옵션 1: 다운타임 마이그레이션** (간단, 빠름)
- 서비스 중단 필요
- 트래픽이 적은 시간대 선택
- 빠른 전환 가능

**옵션 2: 무중단 마이그레이션** (복잡, 안전)
- Dual Write 방식
- 서비스 중단 없음
- 구현 복잡도 높음

#### 데이터 검증
- 레코드 수 비교
- 데이터 무결성 검증
- 샘플 데이터 검증
- 성능 테스트

## 리스크 관리

### Phase 1 리스크

| 리스크 | 영향도 | 대응 방안 |
|--------|--------|----------|
| 기존 기능 누락 | 높음 | 철저한 기능 목록 작성 및 체크리스트 |
| 성능 저하 | 중간 | 성능 테스트 및 최적화 |
| 사용자 혼란 | 중간 | 점진적 전환 및 사용자 교육 |
| 일정 지연 | 중간 | 버퍼 시간 확보 |

### Phase 2 리스크

| 리스크 | 영향도 | 대응 방안 |
|--------|--------|----------|
| 데이터 손실 | 높음 | 백업 및 검증 절차 수립 |
| 성능 저하 | 중간 | 인덱스 최적화 및 쿼리 튜닝 |
| 호환성 문제 | 중간 | 충분한 테스트 |
| Supabase 제한 | 낮음 | 플랜 확인 및 대안 준비 |

## 체크리스트

### Phase 1 체크리스트

#### 준비 단계
- [ ] Spring Boot 프로젝트 구조 설계 완료
- [ ] Next.js 프로젝트 구조 설계 완료
- [ ] RESTful API 설계 완료
- [ ] 마이그레이션 계획 수립 완료

#### 백엔드 개발
- [ ] Spring Boot 프로젝트 생성 완료
- [ ] RESTful API 구현 완료
- [ ] 기존 비즈니스 로직 마이그레이션 완료
- [ ] 단위 테스트 완료

#### 프론트엔드 개발
- [ ] Next.js 프로젝트 생성 완료
- [ ] 컴포넌트 개발 완료
- [ ] 기존 JSP 기능 마이그레이션 완료
- [ ] 신규 기능 개발 완료

#### 통합 및 배포
- [ ] 통합 테스트 완료
- [ ] 성능 테스트 완료
- [ ] 운영 배포 완료

### Phase 2 체크리스트

#### 준비 단계
- [ ] Supabase 프로젝트 생성 완료
- [ ] 스키마 설계 완료
- [ ] 마이그레이션 계획 수립 완료

#### 데이터베이스 마이그레이션
- [ ] Supabase 프로젝트 생성 완료
- [ ] 스키마 변환 계획 수립 완료
- [ ] DDL 스크립트 변환 완료
- [ ] 트리거 생성 완료
- [ ] 변환된 스키마 적용 완료 (Supabase에 DDL 실행)
- [ ] 데이터 마이그레이션 완료
- [ ] 연결 주소 변경 완료 (application.yml)
- [ ] JPA Entity 수정 완료
- [ ] 데이터 검증 완료

#### 애플리케이션 수정
- [ ] Spring Boot 설정 변경 완료 (연결 주소만 변경)
- [ ] JPA Entity 확인 (스키마 유지 시 변경 불필요)
- [ ] 쿼리 확인 (필요시 최소 변경)

#### 디자인 리뉴얼
- [ ] UI/UX 디자인 완료
- [ ] 컴포넌트 리뉴얼 완료

#### 통합 및 배포
- [ ] 통합 테스트 완료
- [ ] 운영 배포 완료

## 성공 기준

### Phase 1 성공 기준
- ✅ 모든 기존 기능이 Next.js로 정상 작동
- ✅ 성능이 기존 시스템과 동등하거나 향상
- ✅ 사용자 만족도 유지 또는 향상
- ✅ 신규 기능 정상 작동

### Phase 2 성공 기준
- ✅ 데이터 마이그레이션 완료 (100% 데이터 무결성)
- ✅ 모든 기능이 Supabase에서 정상 작동
- ✅ 성능이 기존 시스템과 동등하거나 향상
- ✅ 디자인 리뉴얼 완료
- ✅ Supabase 고급 기능 활용 (Auth, Realtime 등)

## 다음 단계

### Phase 1 시작하기

1. **문서 읽기**
   - `15_NextJS_MariaDB_Start_Guide.md` - 시작 가이드
   - `11_NextJS_Frontend_Guide.md` - Next.js 가이드
   - `13_Spring_Boot_REST_API_Guide.md` - Spring Boot 가이드

2. **프로젝트 생성**
   - Spring Boot 프로젝트 생성
   - Next.js 프로젝트 생성

3. **개발 시작**
   - 회원 관리 모듈부터 시작
   - 점진적으로 확장

### Phase 2 준비하기

1. **문서 읽기**
   - `10_Supabase_Migration_Guide.md` - Supabase 마이그레이션 가이드
   - `12_Complete_Migration_Strategy.md` - 통합 전략

2. **Supabase 프로젝트 생성**
   - Supabase Dashboard에서 프로젝트 생성
   - 연결 정보 확인

3. **마이그레이션 계획 수립**
   - 스키마 설계
   - 데이터 마이그레이션 스크립트 작성

## 참고 문서

- `15_NextJS_MariaDB_Start_Guide.md` - Phase 1 시작 가이드
- `11_NextJS_Frontend_Guide.md` - Next.js 프론트엔드 가이드
- `13_Spring_Boot_REST_API_Guide.md` - Spring Boot REST API 가이드
- `10_Supabase_Migration_Guide.md` - Phase 2 마이그레이션 가이드
- `12_Complete_Migration_Strategy.md` - 통합 마이그레이션 전략
- `00_Quick_Start_Prompt.md` - 빠른 시작 프롬프트

